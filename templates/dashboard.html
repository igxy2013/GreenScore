<!DOCTYPE html>
<html lang="zh">
<head>
    {% include 'components/head_resources.html' %}
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- 引入用户菜单组件 -->
    {% include 'components/user_menu.html' %}

    <!-- 隐藏字段，用于存储当前项目ID和标准 -->
    <input type="hidden" id="current-project-id" value="{{ project.id if project else '21' }}">
    <input type="hidden" id="current-project-standard" value="{{ project.standard if project else '成都市标' }}">
    
    <!-- 添加全局页面加载指示器 -->
    {% include 'components/page_loader.html' %}
    
    <div class="page-container">
        <div class="flex min-h-screen">
            <!-- 侧边导航栏 -->
            {% include 'components/sidebar_menu.html' %}

            <!-- 主内容区域 -->
            <main class="flex-1 overflow-y-auto p-8 bg-transparent main-content" style="min-height: 100vh;">
                <div class="max-w-7xl mx-auto px-4 py-8">
                    {% include 'components/page_header.html' %}

                    {% if current_page == 'score_summary' %}
                    <!-- 评分汇总页面 -->
                    {% include 'components/score_summary.html' %}
                    {% endif %}
                    
                    {% block content %}
                    {% if current_page == 'project_info' %}
                    <!-- 项目信息表单 -->
                    {% include 'components/project_info.html' %}
                    {% elif current_page == 'green_materials' %}
                    <!-- 绿色建材计算器内容 -->
                    {% include 'components/green_materials.html' %}
                    {% elif current_page == 'solar_calculator' %}
                    <!-- 太阳能计算器内容 -->
                    {% include 'components/solar_calculator.html' %}
                    {% elif current_page == 'specialty' %}
                    <!-- 使用标准列表组件 -->
                    {% include 'components/standards_table.html' %}
                    {% elif current_page == 'public_transport_analysis' %}
                    {% include 'components/transport_analysis.html' %}
                    {% endif %}
                    {% endblock %}
                </div>
            </main>
        </div>
    </div>

    {% include 'components/report_generators.html' %}
    {% include 'components/initialization_scripts.html' %}
</body>
</html>