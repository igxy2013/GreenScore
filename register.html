<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>智能绿建评价系统-用户注册</title>

 <!-- 修改为本地样式 -->
 <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='image/greenscore-sm.png') }}">
 <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='image/greenscore-32.png') }}">
 <link rel="icon" type="image/png" sizes="48x48" href="{{ url_for('static', filename='image/greenscore.png') }}">
 <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='image/greenscore-lg.png') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/tailwind.min.css') }}">
<script src="https://cdn.tailwindcss.com"></script>
<link href="{{ url_for('static', filename='css/all.min.css') }}" rel="stylesheet">
<style>
/*
* Remix Icon v4.5.0 (Simplified)
*/
[class^="ri-"], [class*=" ri-"] {
  display: inline-block;
  width: 1em;
  height: 1em;
  background-repeat: no-repeat;
  background-size: contain;
  background-position: center;
  vertical-align: middle;
}



input::-webkit-outer-spin-button,input::-webkit-inner-spin-button {-webkit-appearance: none;}
input[type="number"] {
    -moz-appearance: textfield;
    appearance: textfield;
}
.logo-text {
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
    font-weight: 600;
}
</style>
<script>
// 预加载其他页面
window.addEventListener('load', () => {
    const links = ['/login', '/reset_password', '/calculator'];
    links.forEach(link => {
        const prefetchLink = document.createElement('link');
        prefetchLink.rel = 'prefetch';
        prefetchLink.href = link;
        document.head.appendChild(prefetchLink);
    });
});

// 添加 Tailwind 配置
tailwind.config = {
    theme: {
        extend: {
            colors: {
                primary: '#3176FF',
                secondary: '#10b981'
            },
            borderRadius: {
                'none': '0px',
                'sm': '4px',
                DEFAULT: '8px',
                'md': '12px',
                'lg': '16px',
                'xl': '20px',
                '2xl': '24px',
                '3xl': '32px',
                'full': '9999px',
                'button': '8px'
            }
        }
    }
}
</script>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 to-white flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
<div class="max-w-md w-full bg-white rounded-lg shadow-xl p-8">
    <div class="text-center mb-8">
        <h1 class="logo-text text-4xl text-primary mb-2 flex items-center justify-center whitespace-nowrap">
            <picture class="inline-block flex-shrink-0">
                <source srcset="{{ url_for('static', filename='image/greenscore@3x.png') }}" media="(-webkit-min-device-pixel-ratio: 3), (min-resolution: 288dpi)">
                <source srcset="{{ url_for('static', filename='image/greenscore@2x.png') }}" media="(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)">
                <img src="{{ url_for('static', filename='image/greenscore.png') }}" alt="logo" class="inline-block h-10 w-10 mr-2">
            </picture>
            <span class="text-3xl sm:text-4xl truncate">智能绿建评价系统</span>
        </h1>
        <h2 class="text-2xl font-semibold text-gray-900">创建账号</h2>
        <p class="mt-2 text-sm text-gray-600">请输入您的邮箱和密码注册账号</p>
    </div>

    <form id="registerForm" class="space-y-6">
        <div>
            <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i class="fas fa-user text-gray-400"></i>
                </div>
                <input type="email" id="email" required
                    class="appearance-none block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm text-gray-900 placeholder-gray-400 
                    focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary sm:text-sm"
                    placeholder="请输入邮箱">
            </div>
            <p class="mt-1 text-sm text-red-500 hidden" id="emailError"></p>
        </div>

        <div>
            <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i class="fas fa-lock text-gray-400"></i>
                </div>
                <input type="password" id="password" required
                    class="appearance-none block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm text-gray-900 placeholder-gray-400 
                    focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary sm:text-sm"
                    placeholder="请输入密码">
            </div>
            <div class="mt-1 h-1 bg-gray-200 rounded-full overflow-hidden">
                <div id="passwordStrength" class="h-full w-0 transition-all duration-300"></div>
            </div>
            <p class="mt-1 text-sm text-gray-500" id="passwordTip">密码至少包含 8 个字符</p>
        </div>

        <div>
            <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i class="fas fa-lock text-gray-400"></i>
                </div>
                <input type="password" id="confirmPassword" required
                    class="appearance-none block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm text-gray-900 placeholder-gray-400 
                    focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary sm:text-sm"
                    placeholder="请再次输入密码">
            </div>
            <p class="mt-1 text-sm text-red-500 hidden" id="confirmPasswordError"></p>
        </div>

        <div>
            <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i class="fas fa-key text-gray-400"></i>
                </div>
                <input type="text" id="inviteCode" required
                    class="appearance-none block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm text-gray-900 placeholder-gray-400 
                    focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary sm:text-sm"
                    placeholder="请输入邀请码">
            </div>
            <p class="mt-1 text-sm text-red-500 hidden" id="inviteCodeError"></p>
        </div>

        <div class="flex items-start">
            <div class="flex items-center h-5">
                <input id="agreement" type="checkbox" required
                    class="w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary">
            </div>
            <label for="agreement" class="ml-2 block text-sm text-gray-600">
                我已阅读并同意
                <a href="javascript:void(0)" onclick="openModal('userAgreementModal')" class="text-primary hover:text-primary/90">《用户协议》</a>
                和
                <a href="javascript:void(0)" onclick="openModal('privacyPolicyModal')" class="text-primary hover:text-primary/90">《隐私政策》</a>
            </label>
        </div>

        <button type="submit" id="submitBtn"
            class="w-full flex justify-center py-2 px-4 border border-transparent rounded-button text-sm font-medium text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary">
            注册
        </button>
    </form>

    <p class="mt-8 text-center text-sm text-gray-600">
        已有账号？
        <a href="/login" class="font-medium text-primary hover:text-primary/80">立即登录</a>
    </p>
</div>

<div id="toast" class="fixed top-4 right-4 flex items-center p-4 mb-4 text-gray-500 bg-white rounded-lg shadow translate-x-full transition-transform duration-300" role="alert">
    <div class="inline-flex items-center justify-center flex-shrink-0 w-8 h-8 rounded-lg">
        <i id="toastIcon" class="ri-error-warning-line"></i>
    </div>
    <div id="toastMessage" class="ml-3 text-sm font-normal"></div>
</div>

<!-- 用户协议模态框 -->
<div id="userAgreementModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
    <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
        <div class="fixed inset-0 transition-opacity" aria-hidden="true">
            <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
        </div>
        <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
        <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full">
            <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                <div class="sm:flex sm:items-start">
                    <div class="mt-3 text-center sm:mt-0 sm:text-left w-full">
                        <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4 text-center">智能绿建评价系统用户协议</h3>
                        <div class="mt-2 prose prose-sm max-w-none overflow-y-auto max-h-96 text-gray-700">
                            <p class="mb-4">欢迎使用智能绿建评价系统（以下简称"本系统"）。本协议是您与本系统所有者之间关于使用本系统服务所订立的协议。</p>
                            
                            <h4 class="font-bold mt-4 mb-2">一、服务内容</h4>
                            <p>本系统是一个专业的绿色建筑评价工具，为用户提供绿色建筑评分计算、项目管理、报告生成等服务。</p>
                            
                            <h4 class="font-bold mt-4 mb-2">二、账号注册与安全</h4>
                            <p>1. 您在注册时需要提供真实、准确的个人信息，并保证这些信息的真实性和有效性。</p>
                            <p>2. 您应妥善保管账号和密码，因账号和密码泄露所导致的一切损失由您自行承担。</p>
                            <p>3. 本系统有权在必要时要求您更改账号或密码。</p>
                            
                            <h4 class="font-bold mt-4 mb-2">三、用户行为规范</h4>
                            <p>1. 用户不得利用本系统从事违反国家法律法规的活动。</p>
                            <p>2. 用户不得上传包含病毒、木马等可能危害系统安全的文件。</p>
                            <p>3. 用户不得进行任何可能对系统造成损害的行为，包括但不限于攻击系统服务器、破解系统等。</p>
                            
                            <h4 class="font-bold mt-4 mb-2">四、知识产权</h4>
                            <p>1. 本系统的所有权、运营权和知识产权归本系统所有者所有。</p>
                            <p>2. 用户通过本系统生成的报告和数据，其知识产权归用户所有，但本系统有权在不泄露用户隐私的前提下，将相关数据用于系统改进和研究。</p>
                            
                            <h4 class="font-bold mt-4 mb-2">五、免责声明</h4>
                            <p>1. 本系统不对用户使用本系统所产生的任何直接或间接损失承担责任。</p>
                            <p>2. 本系统不保证服务不会中断，对系统服务中断所造成的损失不承担责任。</p>
                            <p>3. 用户理解并同意，本系统提供的评分结果仅供参考，最终的绿色建筑评价结果应以相关部门的正式评定为准。</p>
                            
                            <h4 class="font-bold mt-4 mb-2">六、协议修改</h4>
                            <p>本系统有权在必要时修改本协议条款，修改后的协议条款将在系统上公布。如您继续使用本系统，则视为您已接受修改后的协议。</p>
                            
                            <h4 class="font-bold mt-4 mb-2">七、法律适用</h4>
                            <p>本协议的订立、执行和解释及争议的解决均应适用中华人民共和国法律。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                <button type="button" onclick="closeModal('userAgreementModal')" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm">
                    我已阅读并同意
                </button>
                <button type="button" onclick="closeModal('userAgreementModal')" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                    关闭
                </button>
            </div>
        </div>
    </div>
</div>

<!-- 隐私政策模态框 -->
<div id="privacyPolicyModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
    <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
        <div class="fixed inset-0 transition-opacity" aria-hidden="true">
            <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
        </div>
        <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
        <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full">
            <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                <div class="sm:flex sm:items-start">
                    <div class="mt-3 text-center sm:mt-0 sm:text-left w-full">
                        <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4 text-center">智能绿建评价系统隐私政策</h3>
                        <div class="mt-2 prose prose-sm max-w-none overflow-y-auto max-h-96 text-gray-700">
                            <p class="mb-4">本隐私政策描述了智能绿建评价系统（以下简称"本系统"）如何收集、使用和保护您的个人信息。我们非常重视您的隐私保护，请您仔细阅读本政策。</p>
                            
                            <h4 class="font-bold mt-4 mb-2">一、信息收集</h4>
                            <p>1. <strong>账号信息</strong>：当您注册账号时，我们会收集您的电子邮箱地址和密码。</p>
                            <p>2. <strong>项目信息</strong>：当您使用本系统进行绿色建筑评价时，我们会收集您输入的项目相关信息，包括但不限于项目名称、地址、建筑面积、技术参数等。</p>
                            <p>3. <strong>使用数据</strong>：我们会自动收集您使用本系统的相关数据，如访问时间、使用时长、操作记录等。</p>
                            
                            <h4 class="font-bold mt-4 mb-2">二、信息使用</h4>
                            <p>1. 提供、维护和改进我们的服务。</p>
                            <p>2. 开发新的服务或功能。</p>
                            <p>3. 了解您如何使用我们的服务，以便我们可以改进用户体验。</p>
                            <p>4. 向您发送系统更新、安全警报和支持消息。</p>
                            <p>5. 在征得您同意的情况下，向您发送营销信息。</p>
                            
                            <h4 class="font-bold mt-4 mb-2">三、信息共享</h4>
                            <p>除以下情况外，我们不会与第三方共享您的个人信息：</p>
                            <p>1. 获得您的明确同意。</p>
                            <p>2. 为了遵守法律法规的要求。</p>
                            <p>3. 保护本系统、用户或公众的权利、财产或安全。</p>
                            
                            <h4 class="font-bold mt-4 mb-2">四、信息安全</h4>
                            <p>我们采取合理的安全措施来保护您的个人信息不被未经授权的访问、使用或披露。这些措施包括数据加密、访问控制和安全审计。</p>
                            
                            <h4 class="font-bold mt-4 mb-2">五、信息存储</h4>
                            <p>我们会在必要的时间内保留您的个人信息，以实现本隐私政策中描述的目的，除非法律要求或允许更长的保留期限。</p>
                            
                            <h4 class="font-bold mt-4 mb-2">六、您的权利</h4>
                            <p>您有权：</p>
                            <p>1. 访问、更正或删除您的个人信息。</p>
                            <p>2. 限制或反对我们处理您的个人信息。</p>
                            <p>3. 获取您提供给我们的个人信息的副本。</p>
                            <p>4. 随时撤回您的同意。</p>
                            
                            <h4 class="font-bold mt-4 mb-2">七、隐私政策的变更</h4>
                            <p>我们可能会不时更新本隐私政策。当我们进行重大变更时，我们会在系统中发布通知。</p>
                            
                            <h4 class="font-bold mt-4 mb-2">八、联系我们</h4>
                            <p>如果您对本隐私政策有任何疑问或建议，请通过系统提供的联系方式与我们联系。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                <button type="button" onclick="closeModal('privacyPolicyModal')" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm">
                    我已阅读并同意
                </button>
                <button type="button" onclick="closeModal('privacyPolicyModal')" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                    关闭
                </button>
            </div>
        </div>
    </div>
</div>

<script>
// 模态框操作函数
function openModal(modalId) {
    document.getElementById(modalId).classList.remove('hidden');
    document.body.classList.add('overflow-hidden');
}

function closeModal(modalId) {
    document.getElementById(modalId).classList.add('hidden');
    document.body.classList.remove('overflow-hidden');
}

// 点击模态框背景关闭模态框
window.addEventListener('click', function(event) {
    const userAgreementModal = document.getElementById('userAgreementModal');
    const privacyPolicyModal = document.getElementById('privacyPolicyModal');
    
    if (event.target === userAgreementModal) {
        closeModal('userAgreementModal');
    }
    
    if (event.target === privacyPolicyModal) {
        closeModal('privacyPolicyModal');
    }
});

const form = document.getElementById('registerForm');
const emailInput = document.getElementById('email');
const passwordInput = document.getElementById('password');
const confirmPasswordInput = document.getElementById('confirmPassword');
const inviteCodeInput = document.getElementById('inviteCode');
const inviteCodeError = document.getElementById('inviteCodeError');

const submitBtn = document.getElementById('submitBtn');
const passwordStrength = document.getElementById('passwordStrength');
const passwordTip = document.getElementById('passwordTip');
const toast = document.getElementById('toast');
const toastIcon = document.getElementById('toastIcon');
const toastMessage = document.getElementById('toastMessage');

function showToast(message, type = 'success') {
    const toast = document.getElementById('toast');
    const toastIcon = document.getElementById('toastIcon');
    const toastMessage = document.getElementById('toastMessage');
    
    // 设置图标和颜色
    if (type === 'success') {
        toastIcon.className = 'fas fa-check-circle text-green-500';
        toast.querySelector('.w-8').className = 'inline-flex items-center justify-center flex-shrink-0 w-8 h-8 bg-green-100 rounded-lg';
    } else {
        toastIcon.className = 'fas fa-exclamation-circle text-red-500';
        toast.querySelector('.w-8').className = 'inline-flex items-center justify-center flex-shrink-0 w-8 h-8 bg-red-100 rounded-lg';
    }
    
    toastMessage.textContent = message;
    toast.classList.remove('translate-x-full');
    
    // 清除之前的定时器
    if (toast.timeoutId) {
        clearTimeout(toast.timeoutId);
    }
    
    // 设置新的定时器
    toast.timeoutId = setTimeout(() => {
        toast.classList.add('translate-x-full');
    }, 3000);
}

function validateEmail(email) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}

function validateInviteCode(inviteCode) {
    return fetch('/api/validate-invite-code', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ code: inviteCode })
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('服务器响应错误');
        }
        return response.json();
    })
    .then(data => {
        if (!data.valid) {
            throw new Error(data.message || '无效的邀请码');
        }
        return true;
    })
    .catch(error => {
        console.error('邀请码验证错误:', error);
        throw error;
    });
}

form.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    // 重置错误提示
    emailError.classList.add('hidden');
    confirmPasswordError.classList.add('hidden');
    inviteCodeError.classList.add('hidden');
    
    const email = emailInput.value;
    const password = passwordInput.value;
    const confirmPassword = confirmPasswordInput.value;
    const inviteCode = inviteCodeInput.value;
    
    // 表单验证
    if (!validateEmail(email)) {
        emailError.textContent = '请输入有效的邮箱地址';
        emailError.classList.remove('hidden');
        return;
    }
    
    if (password.length < 8) {
        showToast('密码长度不能少于8个字符', 'error');
        return;
    }
    
    if (password !== confirmPassword) {
        confirmPasswordError.textContent = '两次输入的密码不一致';
        confirmPasswordError.classList.remove('hidden');
        return;
    }
    
    if (!document.getElementById('agreement').checked) {
        showToast('请阅读并同意用户协议和隐私政策', 'error');
        return;
    }
    
    // 设置按钮加载状态
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>注册中...';
    
    try {
        // 验证邀请码
        const validateResponse = await fetch('/api/validate-invite-code', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ code: inviteCode })
        });
        
        const validateData = await validateResponse.json();
        console.log('邀请码验证响应:', validateData);  // 添加调试日志
        
        if (!validateResponse.ok || !validateData.valid) {
            throw new Error(validateData.message || '无效的邀请码');
        }
        
        // 提交注册请求
        const registerResponse = await fetch('/api/register', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                email,
                password,
                invitation_code: inviteCode
            })
        });
        
        console.log('注册响应状态:', registerResponse.status);  // 添加调试日志
        
        const responseData = await registerResponse.json();
        console.log('注册响应数据:', responseData);  // 添加调试日志
        
        if (!registerResponse.ok) {
            throw new Error(responseData.message || '注册失败，请重试');
        }
        
        showToast('注册成功！即将跳转到登录页面...', 'success');
        setTimeout(() => {
            window.location.href = '/login';
        }, 2000);
    } catch (error) {
        console.error('注册错误:', error);
        if (error.message.includes('邀请码')) {
            inviteCodeError.textContent = error.message;
            inviteCodeError.classList.remove('hidden');
        } else {
            showToast(error.message || '注册失败，请稍后重试', 'error');
        }
    } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = '注册';
    }
});

function checkPasswordStrength(password) {
    const hasLower = /[a-z]/.test(password);
    const hasUpper = /[A-Z]/.test(password);
    const hasNumber = /\d/.test(password);
    const hasSpecial = /[!@#$%^&*(),.?":{}|<>]/.test(password);
    const length = password.length;
    let strength = 0;
    if (length >= 8) strength++;
    if (hasLower && hasUpper) strength++;
    if (hasNumber) strength++;
    if (hasSpecial) strength++;
    const colors = ['bg-red-500', 'bg-yellow-500', 'bg-green-500', 'bg-green-600'];
    const tips = [
        '密码强度：弱',
        '密码强度：中',
        '密码强度：强',
        '密码强度：非常强'
    ];
    passwordStrength.className = `h-full transition-all duration-300 ${colors[strength - 1]}`;
    passwordStrength.style.width = `${strength * 25}%`;
    passwordTip.textContent = strength > 0 ? tips[strength - 1] : '密码至少包含 8 个字符';
}

emailInput.addEventListener('input', () => {
    const emailError = document.getElementById('emailError');
    if (!validateEmail(emailInput.value) && emailInput.value) {
        emailError.textContent = '请输入有效的邮箱地址';
        emailError.classList.remove('hidden');
    } else {
        emailError.classList.add('hidden');
    }
});

passwordInput.addEventListener('input', () => {
    checkPasswordStrength(passwordInput.value);
});

confirmPasswordInput.addEventListener('input', () => {
    const confirmPasswordError = document.getElementById('confirmPasswordError');
    if (confirmPasswordInput.value && confirmPasswordInput.value !== passwordInput.value) {
        confirmPasswordError.textContent = '两次输入的密码不一致';
        confirmPasswordError.classList.remove('hidden');
    } else {
        confirmPasswordError.classList.add('hidden');
    }
});
</script>
</body>
</html>
